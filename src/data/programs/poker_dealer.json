{
  "id": "poker_dealer",
  "name": {
    "en": "Poker Dealer",
    "zh": "啤牌機"
  },
  "description": {
    "en": "A virtual poker cards dealer that deals card one at a time.",
    "zh": "模擬啤牌機，每次派一隻牌。"
  },
  "image": "/images/programs/poker.png",
  "mode": "Comp",
  "memory": 199,
  "code": [
    {
      "code": "Lbl 0:M→D:?→M:M=0⇒Goto 9:D→M:Fix 0:",
      "bytes": 25,
      "comment": {
        "en": "Display remaining cards, Input command",
        "zh": "顯示剩餘牌數，輸入指令"
      }
    },
    {
      "code": "Lbl 1:Ran#→X:X≥.988⇒Goto 1:Rnd(10³X÷19+.5→X:",
      "bytes": 31,
      "comment": {
        "en": "Generate random number",
        "zh": "生成隨機數"
      }
    },
    {
      "code": "Rnd(X÷4+.5-G→D:4(X÷4-D+1→C:A→X:C≥3⇒B→X:C-2(C≥3→Y:",
      "bytes": 46,
      "comment": {
        "en": "Calculate card's rank and suit",
        "zh": "計算牌的點數和花色"
      }
    },
    {
      "code": "X₁₀^(D:Rnd(Ans-10Rnd(.1Ans-.5+G)-.5+G:(Ans=3)+(Ans=Y⇒Goto 1:",
      "bytes": 39,
      "comment": {
        "en": "Check if card has been drawn before",
        "zh": "檢查牌是否已派出"
      }
    },
    {
      "code": "X+Y₁₀^(-D→X:C<3⇒X→A:C≥3⇒X→B:1M⁻:D+.1C:Norm 2◢Goto 0:",
      "bytes": 40,
      "comment": {
        "en": "Mark card as drawn",
        "zh": "標記牌已派出"
      }
    },
    {
      "code": "Lbl 9:52→M:0→A:0→B:Goto 0",
      "bytes": 18,
      "comment": {
        "en": "Shuffle deck",
        "zh": "洗牌"
      }
    }
  ],
  "guide": {
    "parameters": {
      "en": [
        "M: Display remaining cards, Input command"
      ],
      "zh": [
        "M: 顯示剩餘牌數，輸入指令"
      ]
    },
    "instructions": {
      "en": [
        "Shuffle Deck: Input 0 to M",
        "Draw Card: Input any other number to M",
        "Cards displayed in [Rank].[Suit] format",
        "Shuffle and Reset Deck for first use"
      ],
      "zh": [
        "洗牌：輸入0到M",
        "派牌：輸入任何其他數字到M",
        "卡牌以[點數].[花色]格式顯示",
        "第一次使用前請重置牌組"
      ]
    },
    "examples": [
      {
        "title": {
          "en": "Card format examples",
          "zh": "卡牌格式例子"
        },
        "steps": [
          {
            "en": "7.1 → Seven of Diamonds ♦️",
            "zh": "7.1 → 階磚七♦️"
          },
          {
            "en": "5.2 → Five of Clubs ♣️",
            "zh": "5.2 → 梅花五♣️"
          },
          {
            "en": "12.3 → Queen of Hearts ♥️",
            "zh": "12.3 → 紅心女♥️"
          },
          {
            "en": "1.4 → Ace of Spades ♠️",
            "zh": "1.4 → 葵扇煙♠️"
          }
        ]
      }
    ]
  },
  "analysis": [
    {
      "title": {
        "en": "Draw poker cards without replacement",
        "zh": "不重複抽牌"
      },
      "problem": {
        "en": "Calculator Fx-50FH II does not have a data structures like set or map to \"memorize\" drawn cards.",
        "zh": "計算機 Fx-50FH II 沒有集合或映射等資料結構來「記住」已派出的牌。"
      },
      "steps": [
        {
          "step": 1,
          "formula": "A = 0.0000000000000, B = 0.0000000000000",
          "title": {
            "en": "The Core Idea: Use decimal points to mark drawn cards",
            "zh": "核心概念：用小數點做記號"
          },
          "explanation": {
            "en": "The calculator variables can store numbers with up to  15 decimal places. We use two variables, A and B, as 'ledgers'. Each decimal place, from the 1st to the 13th, represents a card rank (A, 2, 3, ..., K).",
            "zh": "計數機嘅變數可以儲存15個小數位，我哋用兩個變數 A 同 B 做「數簿」。由第1個到第13個小數位，分別代表啤牌嘅點數（A, 2, 3, ..., K）。"
          }
        },
        {
          "step": 2,
          "formula": "A→X:C≥3⇒B→X:",
          "title": {
            "en": "Select the Correct Ledger",
            "zh": "揀啱要用邊本「數簿」"
          },
          "explanation": {
            "en": "The program first decides which ledger to check. Ledger 'A' is for Diamonds (♦️) and Clubs (♣️). Ledger 'B' is for Hearts (♥️) and Spades (♠️).",
            "zh": "程式會先決定要查邊本數簿。數簿 'A' 係用嚟記階磚♦️同梅花♣️，數簿 'B' 就係用嚟記紅心♥️同葵扇♠️。"
          }
        },
        {
          "step": 3,
          "formula": "C-2(C≥3→Y:",
          "title": {
            "en": "Determine the Suit's Value",
            "zh": "決定花色嘅「標記值」"
          },
          "explanation": {
            "en": "A value 'Y' is calculated to represent the suit. For red suits (♦️, ♥️), Y becomes 1. For black suits (♣️, ♠️), Y becomes 2. This is the 'mark' we will put in our ledger.",
            "zh": "程式會計算一個叫 'Y' 嘅值去代表花色，紅色牌（♦️, ♥️）嘅 Y 會係 1。黑色牌（♣️, ♠️）嘅 Y 會係 2，呢個就係我哋將要寫落數簿嘅「標記」。"
          }
        },
        {
          "step": 4,
          "formula": "X₁₀^(D...)",
          "title": {
            "en": "Check the Ledger",
            "zh": "檢查數簿"
          },
          "explanation": {
            "en": "The code looks at the specific decimal place (D, the rank) in the chosen ledger (X). For example, to check the '7', it looks at the 7th decimal place.",
            "zh": "呢段程式碼會喺揀好咗嘅數簿(X)入面，搵出代表點數(D)嗰個小數位。例如，如果要查「7」，佢就會睇第7個小數位嘅數值。"
          }
        },
        {
          "step": 5,
          "formula": "(Ans=3)+(Ans=Y⇒Goto 1:",
          "title": {
            "en": "Has this card been drawn?",
            "zh": "呢張牌係咪已經抽過？"
          },
          "explanation": {
            "en": "It checks the value at that decimal place. If the value is the same as our suit's mark 'Y' (e.g., we drew a ♣️, Y=2, and the value is already 2), it means the card is taken. If the value is 3, it means both cards of that rank (e.g., both ♦️7 and ♣️7) are gone. In either case, it goes back (Goto 1) to draw another card.",
            "zh": "程式會檢查嗰個小數位嘅數值。如果數值同我哋張牌嘅標記 'Y' 一樣（例如我哋抽到梅花♣️，Y=2，而嗰個位嘅數值已經係2），就代表張牌已經被抽走咗。如果數值係3，代表嗰個點數嘅兩張牌（例如階磚7♦️同梅花7♣️）都已經抽晒。無論邊種情況，程式都會返去(Goto 1)重新抽過一張。"
          }
        },
        {
          "step": 6,
          "formula": "X+Y₁₀^(-D→X ...",
          "title": {
            "en": "Mark the Card as Drawn",
            "zh": "將抽到嘅牌做個記號"
          },
          "explanation": {
            "en": "If the card is available, the program adds the suit's value 'Y' to the correct decimal place in the ledger. For example, if we draw the Seven of Clubs (♣️7), it adds 2 to the 7th decimal place of ledger 'A'.",
            "zh": "如果張牌係可以抽嘅，程式就會將代表花色嘅標記值 'Y' 加落去數簿嘅相應小數位。例如，如果抽到梅花七(♣️7)，佢就會喺數簿 'A' 嘅第7個小數位加上 2。"
          }
        },
        {
          "step": 7,
          "formula": "A = 0.1000021000300",
          "title": {
            "en": "Example Ledger",
            "zh": "數簿例子"
          },
          "explanation": {
            "en": "If ledger 'A' looks like this, it means: Ace of Diamonds (♦️A, 1st decimal is 1), Six of Clubs (♣️6, 6th decimal is 2), Seven of Diamonds (♦️7, 7th decimal is 1), and both Jack of Diamonds (♦️J) and Jack of Clubs (♣️J) have been drawn (11th decimal is 3).",
            "zh": "如果數簿 'A' 嘅數值係咁，就代表：階磚煙♦️A (第1個小數位係1) 、梅花六♣️6 (第6個小數位係2) 、階磚七♦️7 (第7個小數位係1) ，同埋階磚J♦️同梅花J♣️都已經抽咗 (第11個小數位係3)。"
          }
        }
      ]
    }
  ]
}