{
  "id": "poker_dealer",
  "name": {
    "en": "Poker Dealer",
    "zh": "啤牌機"
  },
  "description": {
    "en": "A virtual poker card dealer that deals cards one at a time.",
    "zh": "模擬啤牌機，每次派一隻牌。"
  },
  "image": "/images/programs/poker.png",
  "mode": "Comp",
  "memory": 199,
  "code": [
    {
      "code": "Lbl 0:M→D:?→M:M=0⇒Goto 9:D→M:Fix 0:",
      "bytes": 25,
      "comment": {
        "en": "Display remaining cards, command input",
        "zh": "顯示剩餘牌數，輸入指令"
      }
    },
    {
      "code": "Lbl 1:Ran#→X:X≥.988⇒Goto 1:Rnd(10³X÷19+.5→X:",
      "bytes": 31,
      "comment": {
        "en": "Generate random number",
        "zh": "生成隨機數"
      }
    },
    {
      "code": "Rnd(X÷4+.5-G→D:4(X÷4-D+1→C:A→X:C≥3⇒B→X:C-2(C≥3→Y:",
      "bytes": 46,
      "comment": {
        "en": "Calculate card's rank and suit",
        "zh": "計算牌的點數和花色"
      }
    },
    {
      "code": "X₁₀^(D:Rnd(Ans-10Rnd(.1Ans-.5+G)-.5+G:(Ans=3)+(Ans=Y⇒Goto 1:",
      "bytes": 39,
      "comment": {
        "en": "Check if card has been dealt before",
        "zh": "檢查牌是否已派出"
      }
    },
    {
      "code": "X+Y₁₀^(-D→X:C<3⇒X→A:C≥3⇒X→B:1M⁻:D+.1C:Norm 2◢Goto 0:",
      "bytes": 40,
      "comment": {
        "en": "Mark card as dealt",
        "zh": "標記牌已派出"
      }
    },
    {
      "code": "Lbl 9:52→M:0→A:0→B:Goto 0",
      "bytes": 18,
      "comment": {
        "en": "Shuffle deck",
        "zh": "洗牌"
      }
    }
  ],
  "guide": {
    "parameters": {
      "en": [
        "M: Display remaining cards, command input"
      ],
      "zh": [
        "M: 顯示剩餘牌數，輸入指令"
      ]
    },
    "instructions": {
      "en": [
        "Shuffle Deck: input 0 to M",
        "Draw Card: input any other number to M",
        "Cards displayed in [Rank].[Suit] format",
        "Shuffle and reset the deck before first use"
      ],
      "zh": [
        "洗牌：M輸入0",
        "派牌：M輸入任何其他數字",
        "啤牌以[點數].[花色]格式顯示",
        "第一次使用前請洗牌"
      ]
    },
    "examples": [
      {
        "title": {
          "en": "Card format",
          "zh": "啤牌格式"
        },
        "steps": [
          {
            "en": "7.1 → Seven of Diamonds ♦️",
            "zh": "7.1 → 階磚七♦️"
          },
          {
            "en": "5.2 → Five of Clubs ♣️",
            "zh": "5.2 → 梅花五♣️"
          },
          {
            "en": "12.3 → Queen of Hearts ♥️",
            "zh": "12.3 → 紅心女♥️"
          },
          {
            "en": "1.4 → Ace of Spades ♠️",
            "zh": "1.4 → 葵扇煙♠️"
          }
        ]
      }
    ]
  },
  "analysis": [
    {
      "title": {
        "en": "Draw poker cards without replacement",
        "zh": "不重複抽啤牌"
      },
      "problem": {
        "en": "Casio Fx-50FH II do not have data structures like list, set or map to store dealt cards.",
        "zh": "Casio Fx-50FH II 沒有列表、集合或映射等數據結構來儲存已派出的牌。"
      },
      "solution": {
        "en": "Use decimal places to store dealt cards",
        "zh": "用小數點位置儲存已派出的牌。"
      },
      "steps": [
        {
          "formula": "0.1234567890123",
          "title": {
            "en": "Store ranks by position",
            "zh": "位置儲存點數"
          },
          "explanation": {
            "en": "Each decimal place represents a rank. A is the 1st decimal place, 2 is the 2nd, and so on. Each variable can store up to 15 decimal place, which is enough for 13 ranks.",
            "zh": "每個小數位代表一個點數。第1個小數位是A，第2個小數位是2，如此類推。每個變量可以儲存最多15個小數位，足夠記錄13個點數。"
          }
        },
        {
          "formula": "0.0123",
          "title": {
            "en": "Store suits by value",
            "zh": "值儲存花色"
          },
          "explanation": {
            "en": "Each decimal place stores value 0, 1, 2 or 3. 0 for none dealt, 1 for first suit dealt, 2 for second suit dealt, 3 for both suits dealt. Each decimal place can store up to 2 suits. Each variable can store up to 26 cards, 2 variables can store all 52 cards.",
            "zh": "每個小數位儲存值為0、1、2或3。0表示未派出，1表示第一花色已派出，2表示第二花色已派出，3表示兩種花色都已派出。每個小數位可以儲存最多2種花色。每個變量可以儲存最多26張牌，2個變量可以儲存所有52張牌。"
          }
        },
        {
          "formula": "var A: ♦️(1) ♣️(2), var B: ♥️(1) ♠️(2)",
          "title": {
            "en": "Suits store value",
            "zh": "花色儲存值"
          },
          "explanation": {
            "en": "We use variables A and B to store dealt cards. A stores cards of ♦️(1) and ♣️(2), B stores cards of ♥️(1) and ♠️(2).",
            "zh": "我們用變量A和B來儲存已派出的牌。A儲存♦️(1)和♣️(2)，B儲存♥️(1)和♠️(2)。"
          }
        },
        {
          "formula": "([Store Value] = 3) OR ([Store Value] = [Drawn Card Store Value])",
          "title": {
            "en": "Check if card has been dealt",
            "zh": "檢查牌是否已派出"
          },
          "explanation": {
            "en": "If store value is 3 or same as drawn card store value, the card has been dealt.",
            "zh": "如果儲存值是3，或與抽到的牌的儲存值相同，則牌已派出。"
          }
        },
        {
          "title": {
            "en": "Performance discussion",
            "zh": "性能討論"
          },
          "explanation": {
            "en": "As the program keeps dealing cards, collision rate increases, performance degrades. That said, the program is optimized for use cases where only a small number of cards are dealt—such as in Texas Hold'em, where a maximum of 25 cards are dealt.",
            "zh": "隨著程式不斷派牌，碰撞率增加，性能下降。然而，程式優化於少量派牌的情況——例如德州撲克，最多只會派25張牌。"
          }
        }
      ]
    }
  ]
}