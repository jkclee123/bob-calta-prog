{
  "id": "mastermind",
  "name": {
    "en": "Mastermind",
    "zh": "數字推理"
  },
  "description": {
    "en": "A classic code-breaking game where player guess a secret number sequence. Difficulty can be adjusted by setting the number of digits (4-8).",
    "zh": "經典密碼破解遊戲，可調整密碼長度（4至8位）。"
  },
  "image": "/images/programs/mastermind.png",
  "mode": "REG Lin",
  "memory": 359,
  "code": [
    {
      "code": "Lbl 0:Norm 2:0→X:?→X:Fix 0:X=0⇒Goto 2:(X<4)+(X>8)+(X≠Rnd(X⇒Goto 0:",
      "bytes": 45,
      "comment": {
        "en": "Start menu - Continue or Set new game's code length",
        "zh": "開始菜單 - 繼續遊戲或設定新遊戲密碼長度"
      }
    },
    {
      "code": "X→C:100Ran#+Ran#₁₀^(5)+Ran#₁₀^(8:Rnd(Ans₁₀^(C-8)-.5→X:",
      "bytes": 31,
      "comment": {
        "en": "Generate secret code",
        "zh": "生成密碼"
      }
    },
    {
      "code": "Lbl 2:X=0⇒∑x→X:1→B:For 1-C→D To 0:X₁₀^(D:Rnd(Ans-10Rnd(.1Ans-.5+G)-.5+G:",
      "bytes": 49,
      "comment": {
        "en": "Retrieve digits from secret code",
        "zh": "讀取密碼個別位"
      }
    },
    {
      "code": "B(2Ans+1+(Ans=0)+14((Ans=4)+(Ans=7→B:Next:ClrStat:X,BDT:0→X:",
      "bytes": 42,
      "comment": {
        "en": "Calculate secret code's \"prime numbers product\"",
        "zh": "算出密碼的「質數乘積」"
      }
    },
    {
      "code": "Lbl 5:Norm 2:0→Y:?→Y:Y<0⇒Goto 0:Y≥₁₀^(C⇒Goto 5:",
      "bytes": 29,
      "comment": {
        "en": "Input guess",
        "zh": "輸入猜測"
      }
    },
    {
      "code": "If Y=∑x:Then ∑x◢Goto 5:IfEnd:",
      "bytes": 13,
      "comment": {
        "en": "Check if guess is correct",
        "zh": "檢查答案"
      }
    },
    {
      "code": "Fix 0:0→A:∑x→X:∑y→B:For 1-C→D To 0:",
      "bytes": 24,
      "comment": {
        "en": "Set up for feedback's calculation",
        "zh": "準備提示計算"
      }
    },
    {
      "code": "Y₁₀^(D:Rnd(Ans-10Rnd(.1Ans-.5+G)-.5+G→M:",
      "bytes": 27,
      "comment": {
        "en": "Retrieve digits from guess",
        "zh": "讀取猜測個別位"
      }
    },
    {
      "code": "X₁₀^(D:Rnd(Ans-10Rnd(.1Ans-.5+G)-.5+G:",
      "bytes": 25,
      "comment": {
        "en": "Retrieve digits from secret code",
        "zh": "讀取密碼個別位"
      }
    },
    {
      "code": "M=Ans⇒A+.9→A:",
      "bytes": 11,
      "comment": {
        "en": "Check exact match",
        "zh": "檢查完全匹配"
      }
    },
    {
      "code": "B÷(2M+1+(M=0)+14((M=4)+(M=7→M:",
      "bytes": 30,
      "comment": {
        "en": "Divide \"prime numbers product\" by prime number of guess digit",
        "zh": "「質數乘積」除以猜測個別位的質數"
      }
    },
    {
      "code": "If M=Rnd(M:Then A+.1→A:M→B:IfEnd:Next:",
      "bytes": 22,
      "comment": {
        "en": "Check divisibility for number match only",
        "zh": "檢查整除性驗證數字匹配"
      }
    },
    {
      "code": "0→X:Fix 1:A◢Goto 5",
      "bytes": 11,
      "comment": {
        "en": "Display feedback",
        "zh": "顯示提示"
      }
    }
  ],
  "guide": {
    "parameters": {
      "en": [
        "X: Start menu: Continue or Set new game's code length",
        "Y: Input Guess",
        "A: Feedback: shows exact matches and number matches"
      ],
      "zh": [
        "X: 開始菜單 - 繼續遊戲或為新遊戲設定密碼長度",
        "Y: 輸入猜測",
        "A: 提示 - 顯示完全匹配和數字匹配"
      ]
    },
    "instructions": {
      "en": [
        "Continue previous game: Input 0 to X in start menu",
        "Set new game's code length: Input 4-8 to X in start menu",
        "Guess: Input guess to Y in game",
        "Return to start menu: Input any negative number to Y in game",
        "Read feedback: in format [J.K]. J is number of exact matches, K is number of number matches"
      ],
      "zh": [
        "繼續遊戲：在開始菜單輸入0到X",
        "設定新遊戲密碼長度：在開始菜單輸入4-8到X",
        "猜測：在遊戲中輸入猜測到Y",
        "返回開始菜單：在遊戲中輸入任何負數到Y",
        "讀取提示：格式為[J.K]。J是完全匹配的數目，K是數字匹配的數目"
      ]
    },
    "examples": [
      {
        "title": {
          "en": "4-digit game",
          "zh": "4位數遊戲"
        },
        "steps": [
          {
            "en": "Secret Code: 1234",
            "zh": "密碼：1234"
          },
          {
            "en": "Guess: 1345 → Feedback: 1.2",
            "zh": "猜測：1345 → 提示：1.2"
          },
          {
            "en": "1.2 means 1 exact match, 2 number matches",
            "zh": "1.2 表示一個完全匹配，兩個數字匹配"
          },
          {
            "en": "1 is the exact match, 3 and 4 are the number matches",
            "zh": "1是完全匹配，3和4是數字匹配"
          }
        ]
      }
    ]
  },
  "analysis": [
    {
      "title": {
        "en": "Retrieve Digits from a Number",
        "zh": "讀取個別位"
      },
      "problem": {
        "en": "Calculator lacks a built-in function for extracting the nth digit from a number. A function needed to find exact matches and number matches.",
        "zh": "計算機沒有內置抽取數字的第n位的功能。需要這個功能來找出完全匹配和數字匹配。"
      },
      "solution": {
        "en": "Calculator does have round function, we can shift digits and floor to retrieve a digit.",
        "zh": "計算機有四捨五入功能，可以移位及向下取整來讀取個別位"
      },
      "steps": [
        {
          "title": {
            "en": "Example",
            "zh": "例子"
          },
          "formula": "476128",
          "explanation": {
            "en": "We want to retrieve the 3rd digit, which is 6.",
            "zh": "我們要讀取第3位數字，即6。"
          }
        },
        {
          "title": {
            "en": "Goal",
            "zh": "目標"
          },
          "formula": "476.128 - 470 = 6.128",
          "explanation": {
            "en": "Our goal is to subtract 476.128 and 470 to get 6.128.",
            "zh": "我們的目標是將476.128和470相減得到6.128，"
          }
        },
        {
          "title": {
            "en": "Getting 470 from 476128",
            "zh": "從得出470"
          },
          "formula": "floor(47.6128) x 10 = 470",
          "explanation": {
            "en": "Floor 47.6128 to get 47 and then multiply by 10 to get 470",
            "zh": "向下取整47.6128得到47，然後乘以10得到470"
          }
        },
        {
          "title": {
            "en": "Final step",
            "zh": "最後步驟"
          },
          "formula": "floor(6.128) = 6",
          "explanation": {
            "en": "Finally we floor again to get 6.",
            "zh": "最後向下取整得到6。"
          }
        },
        {
          "title": {
            "en": "Check for exact matches",
            "zh": "檢查完全匹配"
          },
          "explanation": {
            "en": "We retrieve the digits from the secret code and the guess at the same position. It is an exact match if the digits are the same.",
            "zh": "我們讀取密碼和猜測相同位置的個別位，如果數字相同，則為完全匹配。"
          }
        }
      ]
    },
    {
      "title": {
        "en": "Check for Number Matches",
        "zh": "檢查數字匹配"
      },
      "problem": {
        "en": "Calculator Fx-50FH II do not have data structures like map, which can be used to look up if the secret code contains a certain digit.",
        "zh": "計算機 Fx-50FH II 沒有映射等數據結構，用來檢查密碼是否包含某個數字。"
      },
      "solution": {
        "en": "Check divisibility of a \"prime numbers product\" to look up whether the secret code contains a certain digit.",
        "zh": "檢查「質數乘積」的整除性來檢查密碼是否包含某個數字。"
      },
      "steps": [
        {
          "title": {
            "en": "Core idea",
            "zh": "核心概念"
          },
          "explanation": {
            "en": "A number formed by multiplying only prime numbers together is only divisible by 1 and those prime factors.",
            "zh": "只由質數相乘組成的數，只能被1和其因數整除。"
          }
        },
        {
          "title": {
            "en": "Map digits to unique prime numbers",
            "zh": "將數字對應到獨一無二的質數"
          },
          "formula": "f(x) = 2x + 1 + (x=0) + 14 ((x=4) + (x=7))",
          "explanation": {
            "en": "The only possible digits are 0-9. We map them to unique prime numbers by pass through f(x). f(0)=2, f(1)=3, f(2)=5, f(3)=7, f(4)=23, f(5)=11, f(6)=13, f(7)=29, f(8)=17, f(9)=19.",
            "zh": "只有0-9這10個數字，我們通過f(x)將它們對應到獨一無二的質數。f(0)=2, f(1)=3, f(2)=5, f(3)=7, f(4)=23, f(5)=11, f(6)=13, f(7)=29, f(8)=17, f(9)=19。"
          }
        },
        {
          "title": {
            "en": "Build the \"prime numbers product\"",
            "zh": "建立「質數乘積」"
          },
          "explanation": {
            "en": "Retrieve each digit from the secret code, map them to their corresponding prime numbers, finally multiply them together to build the \"prime numbers product\".",
            "zh": "讀取密碼所有的個別位，對應到其相應的質數，最後將它們相乘建立「質數乘積」。"
          }
        },
        {
          "title": {
            "en": "Check for Number Match",
            "zh": "檢查數字匹配"
          },
          "explanation": {
            "en": "Retrieve digits from the guess, map them to their corresponding prime numbers, finally divide the \"prime numbers product\" by the prime numbers. If the result is a whole number, it is a number match.",
            "zh": "讀取猜測所有的個別位，對應到其相應的質數，最後將「質數乘積」除以質數。如果結果是整數，則為數字匹配。"
          }
        }
      ]
    }
  ]
}